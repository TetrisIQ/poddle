<script lang="ts">


    import {Participant} from "../model/PollParticipant";
    import {Option} from "../model/Option";
    import {pollParticipants} from "../store";

    export let disabled = false;
    export let participant: Participant;
    export let option: Option;
    export let value: "yes" | "no" | "ifNeededBe" = "no";

    export let size = "52";

    function test() {
        if (!disabled) {
            switch (value) {
                case "ifNeededBe":
                    value = "no"
                    break;
                case "no":
                    value = "yes";
                    break;
                case "yes":
                    value = "ifNeededBe";
                    break;
            }
            if (participant.chosenOptions.find(o => o.id === option.id) === undefined) {
                participant.chosenOptions.push({id: option.id, value: value})
            }
            participant.chosenOptions.find(o => o.id === option.id).value = value;
            $pollParticipants = $pollParticipants;
        }

    }

    function bgstyle() {
        if(disabled) {
            switch (value) {
                case "ifNeededBe":
                    return "bg-yellow-200"
                case "no":
                    return "bg-red-200"
                case "yes":
                    return "bg-green-200"
            }
        } else {
            return "bg-gray-200"
        }
    }


</script>

<div
        on:click={() => test()}
        class="gb-gray-200 checkbox {bgstyle()} {$$props.class}"
        style="width: {size};height: {size};">
    <input type="checkbox" disabled="{disabled}"/>
    {#if value === "no"}
        <svg width={size} height={size} viewBox="0 0 87 56" class="fill-red-600 m-auto" xmlns="http://www.w3.org/2000/svg">
            <path d="M25.7972 11.7972C26.0493 11.5445 26.3488 11.344 26.6785 11.2072C27.0082 11.0704 27.3616 11 27.7185 11C28.0755 11 28.4289 11.0704 28.7586 11.2072C29.0883 11.344 29.3878 11.5445 29.6398 11.7972L44.0007 26.1635L58.3616 11.7972C58.6139 11.5449 58.9134 11.3448 59.2431 11.2082C59.5727 11.0717 59.9261 11.0014 60.2829 11.0014C60.6397 11.0014 60.993 11.0717 61.3227 11.2082C61.6523 11.3448 61.9519 11.5449 62.2042 11.7972C62.4565 12.0496 62.6566 12.3491 62.7932 12.6787C62.9297 13.0084 63 13.3617 63 13.7185C63 14.0754 62.9297 14.4287 62.7932 14.7583C62.6566 15.088 62.4565 15.3875 62.2042 15.6398L47.8379 30.0007L62.2042 44.3616C62.4565 44.6139 62.6566 44.9134 62.7932 45.2431C62.9297 45.5727 63 45.9261 63 46.2829C63 46.6397 62.9297 46.993 62.7932 47.3227C62.6566 47.6523 62.4565 47.9519 62.2042 48.2042C61.9519 48.4565 61.6523 48.6566 61.3227 48.7932C60.993 48.9297 60.6397 49 60.2829 49C59.9261 49 59.5727 48.9297 59.2431 48.7932C58.9134 48.6566 58.6139 48.4565 58.3616 48.2042L44.0007 33.8379L29.6398 48.2042C29.3875 48.4565 29.088 48.6566 28.7583 48.7932C28.4287 48.9297 28.0754 49 27.7185 49C27.3617 49 27.0084 48.9297 26.6787 48.7932C26.3491 48.6566 26.0496 48.4565 25.7972 48.2042C25.5449 47.9519 25.3448 47.6523 25.2082 47.3227C25.0717 46.993 25.0014 46.6397 25.0014 46.2829C25.0014 45.9261 25.0717 45.5727 25.2082 45.2431C25.3448 44.9134 25.5449 44.6139 25.7972 44.3616L40.1635 30.0007L25.7972 15.6398C25.5445 15.3878 25.344 15.0883 25.2072 14.7586C25.0704 14.4289 25 14.0755 25 13.7185C25 13.3616 25.0704 13.0082 25.2072 12.6785C25.344 12.3488 25.5445 12.0493 25.7972 11.7972Z"/>
        </svg>
    {/if}
    {#if value === "ifNeededBe"}
        <svg width={size} height={size} viewBox="0 0 87 56" class="fill-yellow-500 m-auto" xmlns="http://www.w3.org/2000/svg">
            <path d="M3.14062 30.3594V30.125C3.14062 26.7188 3.52344 23.6406 4.28906 20.8906C5.05469 18.125 6.03125 15.7031 7.21875 13.625C8.40625 11.5469 9.65625 9.82812 10.9688 8.46875C12.2812 7.09375 13.4922 6.10156 14.6016 5.49219L15.5156 8.35156C14.5938 9.05469 13.6562 10.0234 12.7031 11.2578C11.7656 12.4922 10.8984 14.0078 10.1016 15.8047C9.32031 17.6016 8.6875 19.6875 8.20312 22.0625C7.71875 24.4375 7.47656 27.1094 7.47656 30.0781V30.4062C7.47656 33.375 7.71875 36.0547 8.20312 38.4453C8.6875 40.8203 9.32031 42.9141 10.1016 44.7266C10.8984 46.5391 11.7656 48.0781 12.7031 49.3438C13.6562 50.625 14.5938 51.6406 15.5156 52.3906L14.6016 55.0156C13.4922 54.4062 12.2812 53.4141 10.9688 52.0391C9.65625 50.6797 8.40625 48.9609 7.21875 46.8828C6.03125 44.8203 5.05469 42.4062 4.28906 39.6406C3.52344 36.875 3.14062 33.7812 3.14062 30.3594Z"/>
            <path d="M83.2891 30.125V30.3594C83.2891 33.7812 82.9062 36.875 82.1406 39.6406C81.375 42.4062 80.3984 44.8203 79.2109 46.8828C78.0234 48.9609 76.7734 50.6797 75.4609 52.0391C74.1484 53.4141 72.9375 54.4062 71.8281 55.0156L70.9141 52.3906C71.8359 51.6875 72.7656 50.7031 73.7031 49.4375C74.6406 48.1875 75.5078 46.6406 76.3047 44.7969C77.1016 42.9688 77.7422 40.8594 78.2266 38.4688C78.7109 36.0625 78.9531 33.375 78.9531 30.4062V30.0781C78.9531 27.1094 78.6953 24.4297 78.1797 22.0391C77.6641 19.6328 76.9922 17.5156 76.1641 15.6875C75.3516 13.8594 74.4766 12.3203 73.5391 11.0703C72.6172 9.80469 71.7422 8.82812 70.9141 8.14062L71.8281 5.49219C72.9375 6.10156 74.1484 7.09375 75.4609 8.46875C76.7734 9.82812 78.0234 11.5469 79.2109 13.625C80.3984 15.7031 81.375 18.125 82.1406 20.8906C82.9062 23.6406 83.2891 26.7188 83.2891 30.125Z"/>
            <path d="M64.7934 9.13856C65.1284 8.77808 65.5283 8.4917 65.9696 8.2962C66.4109 8.1007 66.8847 8 67.3633 8C67.842 8 68.3158 8.1007 68.7571 8.2962C69.1984 8.4917 69.5983 8.77808 69.9333 9.13856C71.3373 10.6347 71.357 13.0522 69.9824 14.5742L40.9544 50.7603C40.6248 51.142 40.2248 51.4487 39.779 51.6617C39.3331 51.8748 38.8508 51.9896 38.3614 51.9993C37.872 52.009 37.3858 51.9133 36.9327 51.7181C36.4796 51.5228 36.069 51.2322 35.7261 50.8638L18.0628 31.9891C17.3816 31.2565 17 30.2714 17 29.2454C17 28.2194 17.3816 27.2343 18.0628 26.5017C18.3978 26.1412 18.7977 25.8548 19.239 25.6593C19.6803 25.4638 20.1541 25.3631 20.6328 25.3631C21.1114 25.3631 21.5853 25.4638 22.0265 25.6593C22.4678 25.8548 22.8677 26.1412 23.2027 26.5017L38.1856 42.5136L64.6952 9.25245C64.7257 9.21244 64.7585 9.17441 64.7934 9.13856Z"/>
        </svg>
    {/if}
    {#if value === "yes"}
        <svg width={size} height={size} viewBox="0 0 87 56" class="fill-green-500 m-auto" xmlns="http://www.w3.org/2000/svg">
            <path d="M64.7934 9.13856C65.1284 8.77808 65.5283 8.4917 65.9696 8.2962C66.4109 8.1007 66.8847 8 67.3633 8C67.842 8 68.3158 8.1007 68.7571 8.2962C69.1984 8.4917 69.5983 8.77808 69.9333 9.13856C71.3373 10.6347 71.357 13.0522 69.9824 14.5742L40.9544 50.7603C40.6248 51.142 40.2248 51.4487 39.779 51.6617C39.3331 51.8748 38.8508 51.9896 38.3614 51.9993C37.872 52.009 37.3858 51.9133 36.9327 51.7181C36.4796 51.5228 36.069 51.2322 35.7261 50.8638L18.0628 31.9891C17.3816 31.2565 17 30.2714 17 29.2454C17 28.2194 17.3816 27.2343 18.0628 26.5017C18.3978 26.1412 18.7977 25.8548 19.239 25.6593C19.6803 25.4638 20.1541 25.3631 20.6328 25.3631C21.1114 25.3631 21.5853 25.4638 22.0265 25.6593C22.4678 25.8548 22.8677 26.1412 23.2027 26.5017L38.1856 42.5136L64.6952 9.25245C64.7257 9.21244 64.7585 9.17441 64.7934 9.13856Z"/>
        </svg>
    {/if}
</div>


<style>
    .checkbox {
        --checkbox-color-primary: #242432;
        --checkbox-color-secondary: #d8d8ea;
        --checkbox-border-width: 4%;
        --checkbox-border-width-active: 7%;
        position: relative;
    }

    .checkbox input {
        opacity: 0;
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        right: 0;
        margin: 0;
        padding: 0;
        cursor: pointer;
    }
</style>